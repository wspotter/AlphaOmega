<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-troubleshooting/sso" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.5.2">
<title data-rh="true">🔐 Troubleshooting OAUTH / SSO Issues | Open WebUI</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://openwebui.com/troubleshooting/sso"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="🔐 Troubleshooting OAUTH / SSO Issues | Open WebUI"><meta data-rh="true" name="description" content="OAUTH or Single Sign-On (SSO) lets you secure Open WebUI with modern authentication, but when users encounter login problems, the solution is often simple—if you know where to look. Most of the time, one of these key issues below is the culprit. Here&#x27;s how to hunt them down and fix SSO headaches fast! 🚦"><meta data-rh="true" property="og:description" content="OAUTH or Single Sign-On (SSO) lets you secure Open WebUI with modern authentication, but when users encounter login problems, the solution is often simple—if you know where to look. Most of the time, one of these key issues below is the culprit. Here&#x27;s how to hunt them down and fix SSO headaches fast! 🚦"><link data-rh="true" rel="icon" href="../images/favicon.png"><link data-rh="true" rel="canonical" href="https://openwebui.com/troubleshooting/sso"><link data-rh="true" rel="alternate" href="https://openwebui.com/troubleshooting/sso" hreflang="en"><link data-rh="true" rel="alternate" href="https://openwebui.com/troubleshooting/sso" hreflang="x-default"><link rel="preconnect" href="https://www.google-analytics.com">
<link rel="preconnect" href="https://www.googletagmanager.com">
<script async src="https://www.googletagmanager.com/gtag/js?id=G-522JSJVWTB"></script>
<script>function gtag(){dataLayer.push(arguments)}window.dataLayer=window.dataLayer||[],gtag("js",new Date),gtag("config","G-522JSJVWTB",{})</script><link rel="stylesheet" href="../assets/css/styles.a94e3d1e.css">
<script src="../assets/js/runtime~main.073bfe71.js" defer="defer"></script>
<script src="../assets/js/main.30f03a6d.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const n=new URLSearchParams(window.location.search).entries();for(var[t,e]of n)if(t.startsWith("docusaurus-data-")){var a=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(a,e)}}catch(t){}}()</script><div id="__docusaurus"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="sso.html#__docusaurus_skipToContent_fallback">Skip to main content</a></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="flex w-full flex-col"><div><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="../index.html"><div class="navbar__logo"><img src="../images/logo.png" alt="" class="themedComponent_mlkZ themedComponent--light_NVdE"><img src="../images/logo-dark.png" alt="" class="themedComponent_mlkZ themedComponent--dark_xIcU"></div><b class="navbar__title text--truncate">Open WebUI</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/open-webui/open-webui" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-github-link" aria-label="GitHub repository"></a><a href="https://discord.com/invite/5rJgQTnV4s" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link header-discord-link" aria-label="Discord server"></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"><div class="navbar__search"><span aria-label="expand searchbar" role="button" class="search-icon" tabindex="0"></span><input id="search_input_react" type="search" placeholder="Loading..." aria-label="Search" class="navbar__search-input search-bar" disabled=""></div></div></div></div></div><div class="mt-3 min-[996px]:hidden"><div class="w-full"><div class="flex w-full flex-col justify-center"><a href="https://tailscale.com/blog/self-host-a-local-ai-stack/?utm_source=OpenWebUI&amp;utm_medium=paid-ad-placement&amp;utm_campaign=OpenWebUI-Docs" target="_blank" class="flex w-full items-center justify-center"><img class="w-full rounded-xl object-cover h-10" loading="lazy" alt="Tailscale" src="../sponsors/banners/tailscale-banner.png"></a><div class="mt-1 line-clamp-1 text-right text-xs font-semibold text-gray-600 dark:text-gray-300">Connect self-hosted AI to any device with Tailscale</div></div></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="flex h-full flex-col overflow-auto"><div class="h-fit"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../index.html">🏡 Home</a></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="../getting-started.html">🚀 Getting Started</a><button aria-label="Expand sidebar category &#x27;🚀 Getting Started&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="../features.html">⭐ Features</a><button aria-label="Expand sidebar category &#x27;⭐ Features&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="../openapi-servers/index.html">🔨 OpenAPI Tool Servers</a><button aria-label="Expand sidebar category &#x27;🔨 OpenAPI Tool Servers&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--active" href="../troubleshooting.html">🛠️ Troubleshooting</a><button aria-label="Collapse sidebar category &#x27;🛠️ Troubleshooting&#x27;" aria-expanded="true" type="button" class="clean-btn menu__caret"></button></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="compatibility.html">🌐 Browser Compatibility</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="connection-error.html">🚧 Server Connectivity Issues</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="password-reset.html">🔑 Reset Admin Password</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="microphone-error.html">🎙️ Troubleshooting Microphone Access</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="rag.html">🧠 Troubleshooting RAG (Retrieval-Augmented Generation)</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="sso.html">🔐 Troubleshooting OAUTH / SSO Issues</a></li></ul></li><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item menu__list-item--collapsed"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist" href="../category/-tutorials.html">📝 Tutorials</a><button aria-label="Expand sidebar category &#x27;📝 Tutorials&#x27;" aria-expanded="false" type="button" class="clean-btn menu__caret"></button></div></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../faq.html">📋 FAQ</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../roadmap.html">🛣️ Roadmap</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../security.html">🔒 Security Policy</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../contributing.html">🤝 Contributing</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../sponsorships.html">🌐 Sponsorships</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../brand.html">🎨 Design Guidelines</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../license.html">⚖️ Open WebUI License</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../enterprise.html">🏢 Open WebUI for Enterprises</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../mission.html">🎯 Our Mission</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="../team.html">👥 Our Team</a></li></ul></nav></div></div><div class="mt-3 px-5"><div class="pb-4"><div class="mb-2"><div class="mb-1 text-xs font-medium text-gray-600 underline dark:text-gray-300">Sponsored by <!-- -->Warp</div><a href="https://warp.dev/open-webui" target="_blank"><img class="block h-12 w-full rounded-xl object-cover" loading="lazy" alt="Warp" src="../sponsors/banners/warp-banner-mobile.png"></a><div class="mt-1 line-clamp-2 text-right text-xs font-medium text-gray-600 dark:text-gray-300">The intelligent terminal for developers</div></div></div></div></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="../index.html"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><a class="breadcrumbs__link" itemprop="item" href="../troubleshooting.html"><span itemprop="name">🛠️ Troubleshooting</span></a><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">🔐 Troubleshooting OAUTH / SSO Issues</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>🔐 Troubleshooting OAUTH / SSO Issues</h1></header><p>OAUTH or Single Sign-On (SSO) lets you secure Open WebUI with modern authentication, but when users encounter login problems, the solution is often simple—if you know where to look. Most of the time, one of these key issues below is the culprit. Here&#x27;s how to hunt them down and fix SSO headaches fast! 🚦</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="common-oauthsso-issues-and-how-to-fix-them-️">Common OAUTH/SSO Issues and How to Fix Them 🛠️<a href="sso.html#common-oauthsso-issues-and-how-to-fix-them-️" class="hash-link" aria-label="Direct link to Common OAUTH/SSO Issues and How to Fix Them 🛠️" title="Direct link to Common OAUTH/SSO Issues and How to Fix Them 🛠️">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="1-webui-url-not-configured-in-admin-panel-">1. WebUI URL Not Configured in Admin Panel 🚪🔒<a href="sso.html#1-webui-url-not-configured-in-admin-panel-" class="hash-link" aria-label="Direct link to 1. WebUI URL Not Configured in Admin Panel 🚪🔒" title="Direct link to 1. WebUI URL Not Configured in Admin Panel 🚪🔒">​</a></h3>
<p>Most OAUTH flows require the application&#x27;s external URL (&quot;redirect URI&quot;) so the provider knows where to send users after login. If this is missing, OAUTH won&#x27;t be able to complete!</p>
<p>✅ Solution:</p>
<ul>
<li>Navigate to: <strong>Admin Settings &gt; General</strong></li>
<li>Ensure your <strong>WebUI URL</strong> field is filled in and points to your deployed instance (e.g., <code>https://yourwebui.yourdomain.com</code>)</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Check for typos! OAUTH is strict—URLs must match exactly, including <code>https://</code>.</p></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="2-incorrect-environment-variable-configuration-">2. Incorrect Environment Variable Configuration 📝🚫<a href="sso.html#2-incorrect-environment-variable-configuration-" class="hash-link" aria-label="Direct link to 2. Incorrect Environment Variable Configuration 📝🚫" title="Direct link to 2. Incorrect Environment Variable Configuration 📝🚫">​</a></h3>
<p>This is by far the <strong>most common cause</strong> of OAUTH breakage. If you misspell, omit, or set the wrong environment variable (especially for OIDC/OAUTH config), authentication can&#x27;t work.</p>
<p><strong>Common Environment Variable Mistakes:</strong></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-non-existent-variables-people-often-use">❌ Non-Existent Variables People Often Use:<a href="sso.html#-non-existent-variables-people-often-use" class="hash-link" aria-label="Direct link to ❌ Non-Existent Variables People Often Use:" title="Direct link to ❌ Non-Existent Variables People Often Use:">​</a></h4>
<ul>
<li><code>OIDC_CONFIG</code> → Use <code>OPENID_PROVIDER_URL</code> instead</li>
<li><code>WEBUI_OIDC_CLIENT_ID</code> → Use <code>OAUTH_CLIENT_ID</code> instead</li>
<li><code>WEBUI_ENABLE_SSO</code> → Use <code>ENABLE_OAUTH_SIGNUP</code> instead</li>
<li><code>WEBUI_AUTH_TYPE</code> → This doesn&#x27;t exist - configure provider-specific variables instead</li>
<li><code>OPENID_CLIENT_ID</code> → Use <code>OAUTH_CLIENT_ID</code> instead</li>
<li><code>OPENID_CLIENT_SECRET</code> → Use <code>OAUTH_CLIENT_SECRET</code> instead</li>
</ul>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-correct-oidc-variables">✅ Correct OIDC Variables:<a href="sso.html#-correct-oidc-variables" class="hash-link" aria-label="Direct link to ✅ Correct OIDC Variables:" title="Direct link to ✅ Correct OIDC Variables:">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Required for OIDC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAUTH_CLIENT_ID=your_client_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAUTH_CLIENT_SECRET=your_client_secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENID_PROVIDER_URL=https://your-provider/.well-known/openid-configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENABLE_OAUTH_SIGNUP=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Optional but recommended</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAUTH_PROVIDER_NAME=Your Provider Name</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAUTH_SCOPES=openid email profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENID_REDIRECT_URI=https://your-domain/oauth/oidc/callback</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="-correct-microsoft-variables">✅ Correct Microsoft Variables:<a href="sso.html#-correct-microsoft-variables" class="hash-link" aria-label="Direct link to ✅ Correct Microsoft Variables:" title="Direct link to ✅ Correct Microsoft Variables:">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use these for Microsoft Entra ID</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MICROSOFT_CLIENT_ID=your_client_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MICROSOFT_CLIENT_SECRET=your_client_secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MICROSOFT_CLIENT_TENANT_ID=your_tenant_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENID_PROVIDER_URL=https://login.microsoftonline.com/YOUR_TENANT_ID/v2.0/.well-known/openid-configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENABLE_OAUTH_SIGNUP=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>✅ Solutions:</p>
<ul>
<li><strong>Always reference the official <a href="../getting-started/env-configuration.html" target="_blank" rel="noopener noreferrer">environment configuration documentation</a></strong> for exact variable names</li>
<li>Double-check your deployment environment:<!-- -->
<ul>
<li>Ensure all required environment variables are set exactly as documented</li>
<li>If self-hosting, confirm these variables are present in your Docker Compose, Kubernetes manifest, or <code>.env</code> file</li>
</ul>
</li>
<li>Restart your backend/app after changing variables so the new values are loaded</li>
</ul>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>Most OAUTH errors (loops, 401s, unresponsiveness) are due to an environment variable incorrectly named, missing entirely, or using outdated variable names!</p></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="3-missing-required-variables-️">3. Missing Required Variables 🚨⚠️<a href="sso.html#3-missing-required-variables-️" class="hash-link" aria-label="Direct link to 3. Missing Required Variables 🚨⚠️" title="Direct link to 3. Missing Required Variables 🚨⚠️">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="openid_provider_url-is-mandatory-for-oidc">OPENID_PROVIDER_URL is Mandatory for OIDC<a href="sso.html#openid_provider_url-is-mandatory-for-oidc" class="hash-link" aria-label="Direct link to OPENID_PROVIDER_URL is Mandatory for OIDC" title="Direct link to OPENID_PROVIDER_URL is Mandatory for OIDC">​</a></h4>
<p>Many users forget this critical variable. Without it, OIDC authentication cannot work.</p>
<p>✅ <strong>For Microsoft Entra ID:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">OPENID_PROVIDER_URL=https://login.microsoftonline.com/YOUR_TENANT_ID/v2.0/.well-known/openid-configuration</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>✅ <strong>For Google:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">OPENID_PROVIDER_URL=https://accounts.google.com/.well-known/openid-configuration</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>✅ <strong>For Authentik:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">OPENID_PROVIDER_URL=https://your-authentik-domain/application/o/your-app-name/.well-known/openid-configuration</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="other-required-variables-by-provider">Other Required Variables by Provider:<a href="sso.html#other-required-variables-by-provider" class="hash-link" aria-label="Direct link to Other Required Variables by Provider:" title="Direct link to Other Required Variables by Provider:">​</a></h4>
<ul>
<li><strong>All OAuth providers:</strong> <code>WEBUI_URL</code>, <code>ENABLE_OAUTH_SIGNUP=true</code></li>
<li><strong>Microsoft:</strong> <code>MICROSOFT_CLIENT_ID</code>, <code>MICROSOFT_CLIENT_SECRET</code>, <code>MICROSOFT_CLIENT_TENANT_ID</code></li>
<li><strong>Google:</strong> <code>GOOGLE_CLIENT_ID</code>, <code>GOOGLE_CLIENT_SECRET</code></li>
<li><strong>OIDC:</strong> <code>OAUTH_CLIENT_ID</code>, <code>OAUTH_CLIENT_SECRET</code>, <code>OPENID_PROVIDER_URL</code></li>
</ul>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="4-persistent-configuration-conflicts-">4. Persistent Configuration Conflicts 🔄💾<a href="sso.html#4-persistent-configuration-conflicts-" class="hash-link" aria-label="Direct link to 4. Persistent Configuration Conflicts 🔄💾" title="Direct link to 4. Persistent Configuration Conflicts 🔄💾">​</a></h3>
<p><strong>New Issue:</strong> Many users don&#x27;t realize that OAuth settings are stored in the database after the first launch when <code>ENABLE_OAUTH_PERSISTENT_CONFIG=true</code> (default).</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="symptoms">Symptoms:<a href="sso.html#symptoms" class="hash-link" aria-label="Direct link to Symptoms:" title="Direct link to Symptoms:">​</a></h4>
<ul>
<li>Changes to environment variables don&#x27;t take effect after restart</li>
<li>Authentication worked once but broke after configuration changes</li>
<li>&quot;No token found in localStorage&quot; errors after reconfiguration</li>
</ul>
<p>✅ <strong>Solutions:</strong></p>
<ol>
<li><strong>For Development/Testing:</strong> Set <code>ENABLE_OAUTH_PERSISTENT_CONFIG=false</code> to always read from environment variables</li>
<li><strong>For Production:</strong> Either:<!-- -->
<ul>
<li>Configure settings through Admin Panel instead of environment variables, OR</li>
<li>Temporarily set <code>ENABLE_OAUTH_PERSISTENT_CONFIG=false</code>, restart to apply new env vars, then set back to <code>true</code></li>
</ul>
</li>
<li><strong>Fresh Start:</strong> Delete the database volume and restart with correct configuration</li>
</ol>
<p>📌 <strong>Example for Docker Compose:</strong></p>
<div class="language-yaml codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-yaml codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token key atrule" style="color:#00a4db">environment</span><span class="token punctuation" style="color:#393A34">:</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> ENABLE_OAUTH_PERSISTENT_CONFIG=false  </span><span class="token comment" style="color:#999988;font-style:italic"># Forces reading from env vars</span><span class="token plain"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> OAUTH_CLIENT_ID=your_client_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> OAUTH_CLIENT_SECRET=your_secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">-</span><span class="token plain"> OPENID_PROVIDER_URL=your_provider_url</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="5-oauth-misconfiguration-on-the-provider-side-">5. OAUTH Misconfiguration on the Provider Side 🏢🔗<a href="sso.html#5-oauth-misconfiguration-on-the-provider-side-" class="hash-link" aria-label="Direct link to 5. OAUTH Misconfiguration on the Provider Side 🏢🔗" title="Direct link to 5. OAUTH Misconfiguration on the Provider Side 🏢🔗">​</a></h3>
<p>Sometimes the issue is with the identity provider (e.g., Google, Okta, Auth0, Azure AD) not aligning with your WebUI&#x27;s setup.</p>
<p>✅ Solutions:</p>
<ul>
<li>Verify your application is correctly registered with the OAUTH provider. Confirm:<!-- -->
<ul>
<li><strong>Redirect URIs exactly match your deployed WebUI address</strong>
<ul>
<li>OIDC: <code>https://your-domain/oauth/oidc/callback</code></li>
<li>Microsoft: <code>https://your-domain/oauth/microsoft/callback</code></li>
<li>Google: <code>https://your-domain/oauth/google/callback</code></li>
</ul>
</li>
<li>Client ID and secret match the values given in your environment settings</li>
<li>Scopes and allowed grant types (e.g., <code>authorization_code</code>) are set as required by Open WebUI</li>
</ul>
</li>
<li>Check the provider&#x27;s logs—misconfigured apps will often show clear error messages there</li>
</ul>
<p>📌 <strong>Redirect URI Format Examples:</strong></p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">✅ Correct: https://ai.company.com/oauth/oidc/callback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">❌ Wrong: https://ai.company.com/oauth/callback/oidc</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">❌ Wrong: https://ai.company.com/callback</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-tip admonition_xJq3 alert alert--success"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 12 16"><path fill-rule="evenodd" d="M6.5 0C3.48 0 1 2.19 1 5c0 .92.55 2.25 1 3 1.34 2.25 1.78 2.78 2 4v1h5v-1c.22-1.22.66-1.75 2-4 .45-.75 1-2.08 1-3 0-2.81-2.48-5-5.5-5zm3.64 7.48c-.25.44-.47.8-.67 1.11-.86 1.41-1.25 2.06-1.45 3.23-.02.05-.02.11-.02.17H5c0-.06 0-.13-.02-.17-.2-1.17-.59-1.83-1.45-3.23-.2-.31-.42-.67-.67-1.11C2.44 6.78 2 5.65 2 5c0-2.2 2.02-4 4.5-4 1.22 0 2.36.42 3.22 1.19C10.55 2.94 11 3.94 11 5c0 .66-.44 1.78-.86 2.48zM4 14h5c-.23 1.14-1.3 2-2.5 2s-2.27-.86-2.5-2z"></path></svg></span>tip</div><div class="admonitionContent_BuS1"><p>When in doubt, recheck your provider registration and regenerate client secrets if needed.</p></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="6-server-side-caching-a-hidden-trouble-spot-">6. Server-Side Caching (A Hidden Trouble Spot!) 🧊🚦<a href="sso.html#6-server-side-caching-a-hidden-trouble-spot-" class="hash-link" aria-label="Direct link to 6. Server-Side Caching (A Hidden Trouble Spot!) 🧊🚦" title="Direct link to 6. Server-Side Caching (A Hidden Trouble Spot!) 🧊🚦">​</a></h3>
<p>A <strong>new and tricky problem</strong>: If you use NGINX (or another reverse proxy) with server-side caching, OAUTH endpoints can misbehave. The result isn&#x27;t always a total failure—often, users experience random or &quot;weird&quot; login bugs that are almost impossible to debug.</p>
<p>✅ Solutions:</p>
<ul>
<li>In your NGINX (or proxy) configuration:<!-- -->
<ul>
<li>Make sure to <strong>exclude</strong> the following endpoints from server-side caching:<!-- -->
<ul>
<li><code>/api</code>, <code>/oauth</code>, <code>/callback</code>, <code>/login</code>, <code>/ws</code>, <code>/websocket</code></li>
</ul>
</li>
<li>Any critical login/auth endpoint must remain uncached!</li>
</ul>
</li>
<li>Reload the proxy config after making changes</li>
</ul>
<p><strong>Example NGINX Configuration:</strong></p>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Disable caching for login / OAuth / websockets endpoints</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">location ~* ^/(api|oauth|callback|login|ws|websocket) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_no_cache 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_cache_bypass 1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_set_header Host $host;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_set_header X-Real-IP $remote_addr;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_set_header X-Forwarded-For $proxy_add_x_forwarded_for;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_set_header X-Forwarded-Proto $scheme;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_http_version 1.1;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_set_header Upgrade $http_upgrade;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_set_header Connection &quot;upgrade&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_read_timeout 3600s;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_send_timeout 3600s;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy_set_header Accept-Encoding &quot;&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<div class="theme-admonition theme-admonition-warning admonition_xJq3 alert alert--warning"><div class="admonitionHeading_Gvgb"><span class="admonitionIcon_Rf37"><svg viewBox="0 0 16 16"><path fill-rule="evenodd" d="M8.893 1.5c-.183-.31-.52-.5-.887-.5s-.703.19-.886.5L.138 13.499a.98.98 0 0 0 0 1.001c.193.31.53.501.886.501h13.964c.367 0 .704-.19.877-.5a1.03 1.03 0 0 0 .01-1.002L8.893 1.5zm.133 11.497H6.987v-2.003h2.039v2.003zm0-3.004H6.987V5.987h2.039v4.006z"></path></svg></span>warning</div><div class="admonitionContent_BuS1"><p>📌 Warning: Never cache OAUTH or login endpoints! Caching can &quot;poison&quot; the session or deliver stale tokens, causing bizarre auth errors.</p></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="7-cookie-configuration-issues-️">7. Cookie Configuration Issues 🍪⚙️<a href="sso.html#7-cookie-configuration-issues-️" class="hash-link" aria-label="Direct link to 7. Cookie Configuration Issues 🍪⚙️" title="Direct link to 7. Cookie Configuration Issues 🍪⚙️">​</a></h3>
<p><strong>Common Problem:</strong> Reverse proxy cookie settings can interfere with OAuth authentication, especially the <code>HttpOnly</code> and <code>SameSite</code> settings.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="symptoms-1">Symptoms:<a href="sso.html#symptoms-1" class="hash-link" aria-label="Direct link to Symptoms:" title="Direct link to Symptoms:">​</a></h4>
<ul>
<li>&quot;No token found in localStorage&quot; errors</li>
<li>Redirect loops after successful authentication</li>
<li>Authentication works but immediately redirects to login page</li>
</ul>
<p>✅ <strong>Solutions:</strong></p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="for-nginx-proxy-manager">For NGINX Proxy Manager:<a href="sso.html#for-nginx-proxy-manager" class="hash-link" aria-label="Direct link to For NGINX Proxy Manager:" title="Direct link to For NGINX Proxy Manager:">​</a></h4>
<div class="language-nginx codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-nginx codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Remove or adjust problematic cookie settings</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ❌ Problematic:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># proxy_cookie_path / &quot;/; Secure; HttpOnly; SameSite=None&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># ✅ Better:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">proxy_cookie_flags ~ secure samesite=lax;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># or remove cookie manipulation entirely</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="environment-variable-cookie-settings">Environment Variable Cookie Settings:<a href="sso.html#environment-variable-cookie-settings" class="hash-link" aria-label="Direct link to Environment Variable Cookie Settings:" title="Direct link to Environment Variable Cookie Settings:">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Recommended cookie settings for OAuth</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WEBUI_SESSION_COOKIE_SAME_SITE=lax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WEBUI_AUTH_COOKIE_SAME_SITE=lax</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WEBUI_SESSION_COOKIE_SECURE=true  # Set to false if using HTTP</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WEBUI_AUTH_COOKIE_SECURE=true     # Set to false if using HTTP</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="8-network-timeout-issues-️">8. Network Timeout Issues ⏱️🌐<a href="sso.html#8-network-timeout-issues-️" class="hash-link" aria-label="Direct link to 8. Network Timeout Issues ⏱️🌐" title="Direct link to 8. Network Timeout Issues ⏱️🌐">​</a></h3>
<p><strong>New Issue:</strong> OAuth providers may be slow to respond, causing timeout errors during the authentication handshake.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="symptoms-2">Symptoms:<a href="sso.html#symptoms-2" class="hash-link" aria-label="Direct link to Symptoms:" title="Direct link to Symptoms:">​</a></h4>
<ul>
<li><code>httpcore.ReadTimeout</code> errors in logs</li>
<li><code>CSRF Warning! State not equal in request and response</code> errors</li>
<li>OAuth login fails intermittently</li>
</ul>
<p>✅ <strong>Solutions:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Increase OAuth timeouts</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AIOHTTP_CLIENT_TIMEOUT=600         # Very high number is needed here, since model responses that take a lot of time also rely on this timeout variable (e.g., a model that is reasoning for 5+ minutes)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">AIOHTTP_CLIENT_TIMEOUT_OPENAI_MODEL_LIST=30</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="9-session-state-mismatch-csrf-errors-">9. Session State Mismatch (CSRF Errors) 🔐❌<a href="sso.html#9-session-state-mismatch-csrf-errors-" class="hash-link" aria-label="Direct link to 9. Session State Mismatch (CSRF Errors) 🔐❌" title="Direct link to 9. Session State Mismatch (CSRF Errors) 🔐❌">​</a></h3>
<p><strong>Advanced Issue:</strong> Session cookies not being properly maintained across OAuth redirect flow.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="symptoms-3">Symptoms:<a href="sso.html#symptoms-3" class="hash-link" aria-label="Direct link to Symptoms:" title="Direct link to Symptoms:">​</a></h4>
<ul>
<li><code>CSRF Warning! State not equal in request and response</code></li>
<li><code>mismatching_state</code> errors in logs</li>
<li>Authentication appears successful but redirects to login</li>
</ul>
<p>✅ <strong>Solutions:</strong></p>
<ol>
<li><strong>Check Cookie Domain Configuration:</strong></li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Ensure cookies are set for the correct domain</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WEBUI_URL=https://your-exact-domain.com  # Must match exactly - check if you have a different value set in the admin panel</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<ol start="2">
<li><strong>Session Configuration:</strong></li>
</ol>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Ensure session handling is properly configured</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WEBUI_SECRET_KEY=your_very_secure_random_key_here</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAUTH_SESSION_TOKEN_ENCRYPTION_KEY=another_secure_key_here</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="10-load-balancer-and-multi-instance-issues-️">10. Load Balancer and Multi-Instance Issues 🔀⚖️<a href="sso.html#10-load-balancer-and-multi-instance-issues-️" class="hash-link" aria-label="Direct link to 10. Load Balancer and Multi-Instance Issues 🔀⚖️" title="Direct link to 10. Load Balancer and Multi-Instance Issues 🔀⚖️">​</a></h3>
<p><strong>Enterprise Issue:</strong> In multi-instance deployments, OAuth sessions can fail if not properly synchronized.</p>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="required-configuration-for-clusters">Required Configuration for Clusters:<a href="sso.html#required-configuration-for-clusters" class="hash-link" aria-label="Direct link to Required Configuration for Clusters:" title="Direct link to Required Configuration for Clusters:">​</a></h4>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Redis for session synchronization (required for multi-instance)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">REDIS_URL=redis://your-redis:6379/0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WEBSOCKET_REDIS_URL=redis://your-redis:6379/0</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Shared secrets across all instances</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WEBUI_SECRET_KEY=same_on_all_instances</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAUTH_SESSION_TOKEN_ENCRYPTION_KEY=same_on_all_instances</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># WebSocket support for clusters</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENABLE_WEBSOCKET_SUPPORT=true</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">WEBSOCKET_MANAGER=redis</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="11-provider-specific-configuration-issues-">11. Provider-Specific Configuration Issues 🏢📋<a href="sso.html#11-provider-specific-configuration-issues-" class="hash-link" aria-label="Direct link to 11. Provider-Specific Configuration Issues 🏢📋" title="Direct link to 11. Provider-Specific Configuration Issues 🏢📋">​</a></h3>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="microsoft-entra-id-common-issues">Microsoft Entra ID Common Issues:<a href="sso.html#microsoft-entra-id-common-issues" class="hash-link" aria-label="Direct link to Microsoft Entra ID Common Issues:" title="Direct link to Microsoft Entra ID Common Issues:">​</a></h4>
<p><strong>Problem:</strong> Using generic OIDC variables instead of Microsoft-specific ones.</p>
<p>✅ <strong>Correct Microsoft Setup:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Use Microsoft-specific variables, not generic OIDC</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MICROSOFT_CLIENT_ID=your_azure_app_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MICROSOFT_CLIENT_SECRET=your_azure_app_secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MICROSOFT_CLIENT_TENANT_ID=your_tenant_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MICROSOFT_OAUTH_SCOPE=openid email profile</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">MICROSOFT_REDIRECT_URI=https://your-domain/oauth/microsoft/callback</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Also required for a working Microsoft setup</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENID_PROVIDER_URL=https://login.microsoftonline.com/YOUR_TENANT_ID/v2.0/.well-known/openid-configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ENABLE_OAUTH_SIGNUP=true</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h4 class="anchor anchorWithStickyNavbar_LWe7" id="authentik-common-issues">Authentik Common Issues:<a href="sso.html#authentik-common-issues" class="hash-link" aria-label="Direct link to Authentik Common Issues:" title="Direct link to Authentik Common Issues:">​</a></h4>
<p><strong>Problem:</strong> Incorrect provider URL format.</p>
<p>✅ <strong>Correct Authentik Setup:</strong></p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain">OAUTH_CLIENT_ID=your_authentik_client_id</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAUTH_CLIENT_SECRET=your_authentik_client_secret</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OPENID_PROVIDER_URL=https://your-authentik-domain/application/o/your-app-slug/.well-known/openid-configuration</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAUTH_PROVIDER_NAME=Authentik</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">OAUTH_SCOPES=openid email profile</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-advanced-troubleshooting-tips">🧪 Advanced Troubleshooting Tips<a href="sso.html#-advanced-troubleshooting-tips" class="hash-link" aria-label="Direct link to 🧪 Advanced Troubleshooting Tips" title="Direct link to 🧪 Advanced Troubleshooting Tips">​</a></h2>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="check-token-storage-method">Check Token Storage Method<a href="sso.html#check-token-storage-method" class="hash-link" aria-label="Direct link to Check Token Storage Method" title="Direct link to Check Token Storage Method">​</a></h3>
<p>Recent versions of Open WebUI moved from URL-based tokens to cookie-based tokens. If you have authentication issues:</p>
<ol>
<li><strong>Clear browser cookies and cache completely</strong></li>
<li><strong>Check browser Developer Tools:</strong>
<ul>
<li>Look for <code>oauth_session_id</code> cookie (new method)</li>
<li>Check for any <code>oauth_id_token</code> cookie (legacy method)</li>
<li>Verify cookies have correct domain and path settings</li>
</ul>
</li>
</ol>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="debugging-oauth-flow">Debugging OAuth Flow<a href="sso.html#debugging-oauth-flow" class="hash-link" aria-label="Direct link to Debugging OAuth Flow" title="Direct link to Debugging OAuth Flow">​</a></h3>
<p>Enable debug logging and trace the OAuth flow:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Enable detailed logging</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">GLOBAL_LOG_LEVEL=DEBUG</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check logs for these key steps:</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 1. GET /oauth/{provider}/login - Should return 302 redirect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 2. User authenticates with provider</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 3. GET /oauth/{provider}/callback?code=... - Should return 200 or redirect</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># 4. User should be logged in</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="database-debugging">Database Debugging<a href="sso.html#database-debugging" class="hash-link" aria-label="Direct link to Database Debugging" title="Direct link to Database Debugging">​</a></h3>
<p>Check if user accounts are being created:</p>
<div class="language-bash codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#393A34;--prism-background-color:#f6f8fa"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-bash codeBlock_bY9V thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Access your container</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">docker exec -it your-openwebui-container sh</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"># Check if users are created (adjust path to your data directory)</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">ls -la /app/backend/data/</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="test-without-reverse-proxy">Test Without Reverse Proxy<a href="sso.html#test-without-reverse-proxy" class="hash-link" aria-label="Direct link to Test Without Reverse Proxy" title="Direct link to Test Without Reverse Proxy">​</a></h3>
<p>If using a reverse proxy, test OAuth directly against Open WebUI:</p>
<ol>
<li>Temporarily expose Open WebUI port directly</li>
<li>Update OAuth provider redirect URI to point to direct port</li>
<li>Test authentication without proxy</li>
<li>If it works, the issue is in your proxy configuration</li>
</ol>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="-pro-tip-always-check-the-logs">🧪 Pro Tip: Always Check the Logs<a href="sso.html#-pro-tip-always-check-the-logs" class="hash-link" aria-label="Direct link to 🧪 Pro Tip: Always Check the Logs" title="Direct link to 🧪 Pro Tip: Always Check the Logs">​</a></h2>
<ul>
<li>Look at backend logs and browser network errors. The first error usually points to the misconfiguration (redirect URI mismatch, missing/invalid variable, provider-side error, or caching).</li>
<li>If unsure which side is the problem, try logging in from an incognito browser window and watch for any blocked or failed requests.</li>
</ul>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="key-log-messages-to-watch-for">Key Log Messages to Watch For:<a href="sso.html#key-log-messages-to-watch-for" class="hash-link" aria-label="Direct link to Key Log Messages to Watch For:" title="Direct link to Key Log Messages to Watch For:">​</a></h3>
<ul>
<li><code>OAuth callback error: mismatching_state</code> → Session/cookie issue</li>
<li><code>httpcore.ReadTimeout</code> → Network timeout issue</li>
<li><code>The email or password provided is incorrect</code> → Often means OAuth completed but session wasn&#x27;t established</li>
<li><code>404</code> on callback URLs → Redirect URI misconfiguration</li>
</ul>
<hr>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="summary-checklist-">Summary Checklist ✅<a href="sso.html#summary-checklist-" class="hash-link" aria-label="Direct link to Summary Checklist ✅" title="Direct link to Summary Checklist ✅">​</a></h2>
<table><thead><tr><th>Problem</th><th>Fix</th></tr></thead><tbody><tr><td>🔗 WebUI URL missing or wrong</td><td>Set correct WebUI URL in admin panel</td></tr><tr><td>📝 Env var typo or missing</td><td>Double-check against official docs - avoid non-existent vars like <code>OIDC_CONFIG</code></td></tr><tr><td>🚨 Missing OPENID_PROVIDER_URL</td><td>Always required for OIDC - set to provider&#x27;s <code>.well-known/openid-configuration</code></td></tr><tr><td>🔄 Persistent config conflicts</td><td>Set <code>ENABLE_OAUTH_PERSISTENT_CONFIG=false</code> or use admin panel</td></tr><tr><td>🏢 Provider misconfigured</td><td>Confirm app registration, URIs &amp; client IDs/secrets</td></tr><tr><td>🧊 Proxy caching interfering</td><td>Exclude OAuth endpoints from all server-side caches</td></tr><tr><td>🍪 Cookie configuration issues</td><td>Check reverse proxy cookie settings and env vars</td></tr><tr><td>⏱️ Timeout problems</td><td>Increase <code>AIOHTTP_CLIENT_TIMEOUT</code> values</td></tr><tr><td>🔐 CSRF/session issues</td><td>Verify <code>WEBUI_SECRET_KEY</code> and session configuration</td></tr><tr><td>🔀 Multi-instance problems</td><td>Configure Redis and shared secrets</td></tr><tr><td>Still stuck?</td><td>Check debug logs, test without proxy, verify provider setup</td></tr></tbody></table>
<hr>
<p>By carefully configuring BOTH your OAuth provider and your WebUI environment—and keeping critical login endpoints immune to caching—you&#x27;ll eliminate nearly all SSO/OAuth login problems. Don&#x27;t let a typo, missing variable, or a hidden cache block your users from seamless, secure AI access! 🦾</p></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="row margin-top--sm theme-doc-footer-edit-meta-row"><div class="col"><a href="https://github.com/open-webui/docs/blob/main/docs/troubleshooting/sso.mdx" target="_blank" rel="noopener noreferrer" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_Z9Sw" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_JAkA"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="rag.html"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">🧠 Troubleshooting RAG (Retrieval-Augmented Generation)</div></a><a class="pagination-nav__link pagination-nav__link--next" href="../category/-tutorials.html"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">📝 Tutorials</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="sso.html#common-oauthsso-issues-and-how-to-fix-them-️" class="table-of-contents__link toc-highlight">Common OAUTH/SSO Issues and How to Fix Them 🛠️</a><ul><li><a href="sso.html#1-webui-url-not-configured-in-admin-panel-" class="table-of-contents__link toc-highlight">1. WebUI URL Not Configured in Admin Panel 🚪🔒</a></li><li><a href="sso.html#2-incorrect-environment-variable-configuration-" class="table-of-contents__link toc-highlight">2. Incorrect Environment Variable Configuration 📝🚫</a></li><li><a href="sso.html#3-missing-required-variables-️" class="table-of-contents__link toc-highlight">3. Missing Required Variables 🚨⚠️</a></li><li><a href="sso.html#4-persistent-configuration-conflicts-" class="table-of-contents__link toc-highlight">4. Persistent Configuration Conflicts 🔄💾</a></li><li><a href="sso.html#5-oauth-misconfiguration-on-the-provider-side-" class="table-of-contents__link toc-highlight">5. OAUTH Misconfiguration on the Provider Side 🏢🔗</a></li><li><a href="sso.html#6-server-side-caching-a-hidden-trouble-spot-" class="table-of-contents__link toc-highlight">6. Server-Side Caching (A Hidden Trouble Spot!) 🧊🚦</a></li><li><a href="sso.html#7-cookie-configuration-issues-️" class="table-of-contents__link toc-highlight">7. Cookie Configuration Issues 🍪⚙️</a></li><li><a href="sso.html#8-network-timeout-issues-️" class="table-of-contents__link toc-highlight">8. Network Timeout Issues ⏱️🌐</a></li><li><a href="sso.html#9-session-state-mismatch-csrf-errors-" class="table-of-contents__link toc-highlight">9. Session State Mismatch (CSRF Errors) 🔐❌</a></li><li><a href="sso.html#10-load-balancer-and-multi-instance-issues-️" class="table-of-contents__link toc-highlight">10. Load Balancer and Multi-Instance Issues 🔀⚖️</a></li><li><a href="sso.html#11-provider-specific-configuration-issues-" class="table-of-contents__link toc-highlight">11. Provider-Specific Configuration Issues 🏢📋</a></li></ul></li><li><a href="sso.html#-advanced-troubleshooting-tips" class="table-of-contents__link toc-highlight">🧪 Advanced Troubleshooting Tips</a><ul><li><a href="sso.html#check-token-storage-method" class="table-of-contents__link toc-highlight">Check Token Storage Method</a></li><li><a href="sso.html#debugging-oauth-flow" class="table-of-contents__link toc-highlight">Debugging OAuth Flow</a></li><li><a href="sso.html#database-debugging" class="table-of-contents__link toc-highlight">Database Debugging</a></li><li><a href="sso.html#test-without-reverse-proxy" class="table-of-contents__link toc-highlight">Test Without Reverse Proxy</a></li></ul></li><li><a href="sso.html#-pro-tip-always-check-the-logs" class="table-of-contents__link toc-highlight">🧪 Pro Tip: Always Check the Logs</a><ul><li><a href="sso.html#key-log-messages-to-watch-for" class="table-of-contents__link toc-highlight">Key Log Messages to Watch For:</a></li></ul></li><li><a href="sso.html#summary-checklist-" class="table-of-contents__link toc-highlight">Summary Checklist ✅</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items clean-list"><li class="footer__item"><a class="footer__link-item" href="../getting-started.html">Getting Started</a></li><li class="footer__item"><a class="footer__link-item" href="../faq.html">FAQ</a></li><li class="footer__item"><a href="https://github.com/open-webui/docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">Help Improve The Docs</a></li></ul></div><div class="col footer__col"><div class="footer__title">Community</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/open-webui/open-webui" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://discord.gg/5rJgQTnV4s" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://www.reddit.com/r/OpenWebUI/" target="_blank" rel="noopener noreferrer" class="footer__link-item">Reddit<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li><li class="footer__item"><a href="https://x.com/OpenWebUI" target="_blank" rel="noopener noreferrer" class="footer__link-item">𝕏<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/open-webui/open-webui/blob/main/CHANGELOG.md" target="_blank" rel="noopener noreferrer" class="footer__link-item">Release Notes</a></li><li class="footer__item"><a href="https://openwebui.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">About</a></li><li class="footer__item"><a href="https://openwebui.com" target="_blank" rel="noopener noreferrer" class="footer__link-item">Report a Vulnerability / Responsible Disclosure</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><img src="../images/logo-dark.png" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE" height="100"><img src="../images/logo-dark.png" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU" height="100"></div></div></div></footer></div>
</body>
</html>